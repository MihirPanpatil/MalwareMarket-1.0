from http.server import HTTPServer, BaseHTTPRequestHandler
import requests

class IPFSProxyHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        if self.path.startswith('/ipfs/'):
            ipfs_hash = self.path.split('/ipfs/')[1]
            response = requests.get(f'http://localhost:8080/ipfs/{ipfs_hash}')
            
            self.send_response(response.status_code)
            for key, value in response.headers.items():
                self.send_header(key, value)
            self.end_headers()
            
            self.wfile.write(response.content)
